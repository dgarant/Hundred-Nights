{% load tag_extras %}

{% include "report_header.html" %}

    <style type="text/css">
        div.spacer {
            margin: 5em;
        }
    </style>

    <div style="width: 800px; margin: 0 auto;">
    <h1>United Way Report: {{ start_date }} through {{ end_date }}</h1>
    <h1>{{ visit_type_name }}</h1>
    <hr/>

        <h2>{{ num_unique_visitors }} Unique Visitors</h2>
        <h2>{{ total_visits }} Visits Overall</h2>

        <div class="spacer"></div>

        <h2>One-time Responses</h2>
        <table>
            <thead>
                <tr>
                    <th>Prompt</th>
                    <th>Affirmative Responses</th>
                </tr>
                <tr>
            </thead>
            <tbody>
                {% for prompt, count in visitor_questions %}
                    <tr>
                        <td>{{ prompt }}</td>
                        <td>{{ count }} </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>

        <div class="spacer"></div>

        <h2>Per-Visit Responses</h2>
        <table>
            <thead>
                <tr>
                    <th>Prompt</th>
                    <th>Affirmative Responses</th>
                    <th>Unique Respondents</th>
                </tr>
            </thead>
            <tbody>
        {% for prompt, count, unique_visitors in visit_questions %}
            <tr>
                <td>{{ prompt }}</td>
                <td>{{ count }}</td>
                <td>{{ unique_visitors }}</td>
            </tr>
        {% endfor %}
            </tbody>
        </table>

        <div class="spacer"></div>

        <h2>Visits by Town of ID</h2>
        <table>
            <thead>
                <tr>
                    <th>Town of ID</th>
                    <th>Unique Visitors</th>
                    <th>Total Visits</th>
                </tr>
            </thead>
            <tbody>
            {% for town, unique_count, total_count in visitors_by_id_town %}
                <tr>
                    <td>{{ town }}</td>
                    <td>{{ unique_count }}</td>
                    <td>{{ total_count }}</td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
        Number of unique towns of ID: {{ visitors_by_id_town|length }}

        <div class="spacer"></div>

        <h2>Visits by Town of Residence</h2>
        <table>
            <thead>
                <tr>
                    <th>Town of Residence</th>
                    <th>Unique Visitors</th>
                    <th>Total Visits</th>
                </tr>
            </thead>
            <tbody>
            {% for town, unique_count, total_count in visitors_by_resid_town %}
                <tr>
                    <td>{{ town }}</td>
                    <td>{{ unique_count }}</td>
                    <td>{{ total_count }}</td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
        Number of unique towns of residence: {{ visitors_by_resid_town|length }}
        </div>

    </body>
</html>

